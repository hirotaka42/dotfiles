# IMEè¾æ›¸ç®¡ç†ãƒ„ãƒ¼ãƒ« - ãƒ†ã‚¹ãƒˆ

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯IMEè¾æ›¸ç®¡ç†ãƒ„ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
tests/
â”œâ”€â”€ README.md           # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ test_data.json      # ãƒ†ã‚¹ãƒˆç”¨è¾æ›¸ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ test_converter.py   # Pythonç‰ˆã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â””â”€â”€ test_web.html       # Webç‰ˆã®ãƒ†ã‚¹ãƒˆï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œï¼‰
```

## ğŸ§ª Pythonç‰ˆãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

### å¿…è¦è¦ä»¶
- Python 3.7ä»¥é™
- æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã¿ï¼ˆè¿½åŠ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ï¼‰

### å®Ÿè¡Œæ–¹æ³•

```bash
# testsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd tests

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
python3 test_converter.py

# ã¾ãŸã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰
python3 -m tests.test_converter
```

### ãƒ†ã‚¹ãƒˆå†…å®¹

Pythonç‰ˆã§ã¯ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ã¾ã™ï¼š

#### åŸºæœ¬æ©Ÿèƒ½
- âœ… JSONãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿
- âœ… å…¨å˜èªã®å–å¾—
- âœ… ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ä»˜ãå˜èªå–å¾—
- âœ… çµ±è¨ˆæƒ…å ±ã®è¡¨ç¤º

#### å‡ºåŠ›å½¢å¼
- âœ… CSVå‡ºåŠ›ï¼ˆUTF-8-SIGã€BOMä»˜ãï¼‰
- âœ… TXTå‡ºåŠ›ï¼ˆUTF-8ã€ã‚¿ãƒ–åŒºåˆ‡ã‚Šï¼‰
- âœ… Windows IMEå½¢å¼ï¼ˆUTF-16LEã€BOMä»˜ãï¼‰
- âœ… macOS plistå½¢å¼ï¼ˆUTF-8ã€XMLï¼‰

#### å“è©ãƒãƒƒãƒ”ãƒ³ã‚°
- âœ… Windows IMEç”¨ã®å“è©ãƒãƒƒãƒ”ãƒ³ã‚°
- âœ… ã€Œè¨˜å·ã€â†’ã€ŒçŸ­ç¸®ã‚ˆã¿ã€å¤‰æ›
- âœ… æœªå®šç¾©å“è©ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤

#### ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- âœ… å˜ä¸€ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿
- âœ… è¤‡æ•°ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿
- âœ… ç„¡åŠ¹ã‚«ãƒ†ã‚´ãƒªã®é™¤å¤–

#### ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
- âœ… ç©ºã®ã‚«ãƒ†ã‚´ãƒªå‡¦ç†
- âœ… XMLç‰¹æ®Šæ–‡å­—ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—

### ãƒ†ã‚¹ãƒˆçµæœã®è¦‹æ–¹

```
test_csv_output (CSVå‡ºåŠ›ã®ãƒ†ã‚¹ãƒˆ) ... ok
test_windows_output (Windowså½¢å¼å‡ºåŠ›ã®ãƒ†ã‚¹ãƒˆ) ... ok
...

----------------------------------------------------------------------
Ran 13 tests in 0.049s

OK
```

- `ok`: ãƒ†ã‚¹ãƒˆæˆåŠŸ
- `ERROR`: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼
- `FAIL`: ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³å¤±æ•—

## ğŸŒ Webç‰ˆãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

### å®Ÿè¡Œæ–¹æ³•

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `test_web.html` ã‚’é–‹ã
2. ã€Œå…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ†ã‚¹ãƒˆçµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆå†…å®¹

Webç‰ˆã§ã¯ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ã¾ã™ï¼š

#### ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†
- âœ… CSVãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼ˆé€šå¸¸æ–‡å­—åˆ—ï¼‰
- âœ… CSVãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼ˆãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆï¼‰
- âœ… CSVãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼ˆnullå€¤ï¼‰
- âœ… XMLç‰¹æ®Šæ–‡å­—ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—

#### å“è©ãƒãƒƒãƒ”ãƒ³ã‚°
- âœ… Windowså“è©ãƒãƒƒãƒ”ãƒ³ã‚° - è¨˜å·
- âœ… Windowså“è©ãƒãƒƒãƒ”ãƒ³ã‚° - åè©
- âœ… Windowså“è©ãƒãƒƒãƒ”ãƒ³ã‚° - äººå
- âœ… Windowså“è©ãƒãƒƒãƒ”ãƒ³ã‚° - å‹•è©
- âœ… Windowså“è©ãƒãƒƒãƒ”ãƒ³ã‚° - æœªå®šç¾©å“è©

#### ãƒ‡ãƒ¼ã‚¿å‡¦ç†
- âœ… ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚«ãƒ†ã‚´ãƒªæ•°
- âœ… ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å˜èªæ•°
- âœ… CSVãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆ
- âœ… å“è©ã®ä¸€è²«æ€§

#### ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
- âœ… UTF-16LE BOMã®ç¢ºèª
- âœ… UTF-16LEæ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰

#### ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- âœ… å˜ä¸€ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿
- âœ… è¤‡æ•°ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿

### ãƒ†ã‚¹ãƒˆçµæœã®è¦‹æ–¹

- âœ… ç·‘è‰² = ãƒ†ã‚¹ãƒˆæˆåŠŸ
- âŒ èµ¤è‰² = ãƒ†ã‚¹ãƒˆå¤±æ•—ï¼ˆã‚¨ãƒ©ãƒ¼è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰

## ğŸ“Š ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

### ã‚«ãƒãƒ¬ãƒƒã‚¸ç‡

| å¯¾è±¡ | ã‚«ãƒãƒ¬ãƒƒã‚¸ |
|------|----------|
| convert.py | **67%** âœ… |
| test_converter.py | **98%** |
| **åˆè¨ˆ** | **81%** |

è©³ç´°ã¯ [COVERAGE.md](COVERAGE.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### Pythonç‰ˆ
| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° |
|---------|---------|
| åŸºæœ¬æ©Ÿèƒ½ | 5 |
| å‡ºåŠ›å½¢å¼ | 5 |
| å“è©ãƒãƒƒãƒ”ãƒ³ã‚° | 1 |
| ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ | 3 |
| ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ | 3 |
| **åˆè¨ˆ** | **17** |

### Webç‰ˆ
| ã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆæ•° |
|---------|---------|
| ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç† | 4 |
| å“è©ãƒãƒƒãƒ”ãƒ³ã‚° | 5 |
| ãƒ‡ãƒ¼ã‚¿å‡¦ç† | 4 |
| ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° | 2 |
| ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ | 2 |
| **åˆè¨ˆ** | **17** |

## ğŸ”§ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿

`test_data.json` ã«ã¯ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

- **è¨˜å·ã‚«ãƒ†ã‚´ãƒª**: 2ä»¶ã®å˜èªï¼ˆâ†’, â—‹ï¼‰
- **äººåã‚«ãƒ†ã‚´ãƒª**: 1ä»¶ã®å˜èªï¼ˆç”°ä¸­ï¼‰
- **ç„¡åŠ¹ã‚«ãƒ†ã‚´ãƒª**: 1ä»¶ã®å˜èªï¼ˆç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ãŸã‚å‡ºåŠ›ã•ã‚Œãªã„ï¼‰

## ğŸ› ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹å ´åˆ

### Pythonç‰ˆ

1. **Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèª**
   ```bash
   python3 --version  # 3.7ä»¥é™ãŒå¿…è¦
   ```

2. **ãƒ‘ã‚¹ã®å•é¡Œ**
   - `tests/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰å®Ÿè¡Œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - ã¾ãŸã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰ç›¸å¯¾ãƒ‘ã‚¹ã§å®Ÿè¡Œ

3. **æ¨©é™ã®å•é¡Œ**
   ```bash
   chmod +x test_converter.py
   ```

### Webç‰ˆ

1. **ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèª**
   - F12ã‚’æŠ¼ã—ã¦é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã
   - Consoleã‚¿ãƒ–ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª

2. **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ¶é™**
   - ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚ˆã£ã¦ã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®å®Ÿè¡Œã«åˆ¶é™ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
   - ãã®å ´åˆã¯ç°¡æ˜“HTTPã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œï¼š
     ```bash
     cd tests
     python3 -m http.server 8000
     # ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:8000/test_web.html ã‚’é–‹ã
     ```

## ğŸ“ æ–°ã—ã„ãƒ†ã‚¹ãƒˆã®è¿½åŠ 

### Pythonç‰ˆ

`test_converter.py` ã«æ–°ã—ã„ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ï¼š

```python
def test_new_feature(self):
    """æ–°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ"""
    # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°
    self.assertEqual(actual, expected)
```

### Webç‰ˆ

`test_web.html` ã® `defineTests()` é–¢æ•°ã«è¿½åŠ ï¼š

```javascript
runner.test('æ–°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ', () => {
    const result = newFunction();
    assertEqual(result, expected);
});
```

## ğŸš€ CI/CDã§ã®å®Ÿè¡Œ

### GitHub Actionsä¾‹

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.9'
      - name: Run Python tests
        run: |
          cd tools/ime-dictionaries/tests
          python3 test_converter.py
```

## ğŸ“š å‚è€ƒè³‡æ–™

- [Python unittest ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.python.org/ja/3/library/unittest.html)
- [XML.etree.ElementTree](https://docs.python.org/ja/3/library/xml.etree.elementtree.html)
- [CSV ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ](https://tools.ietf.org/html/rfc4180)
- [UTF-16ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°](https://www.unicode.org/faq/utf_bom.html)

## ğŸ¤ è²¢çŒ®

ãƒ†ã‚¹ãƒˆã®è¿½åŠ ã‚„æ”¹å–„ã®ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼
